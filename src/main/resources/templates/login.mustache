<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="FEZ-QQqTHTmdnS8FzNs-7TOeveE9vAmN9_fs3MgIzq4"/>

    <title>PSY THINKTANK에 오신 것을 환영합니다.</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3858475418928277"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/51db22a717.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(() => {
            let error = '';
            let loginTryCount = '';
            document.cookie.split(';').map(item => {
                if (item.includes("error")) {
                    error = item.split("=")[1];
                }
                if (item.includes("loginTryCount")) {
                    loginTryCount = item.split("=")[1];
                }
            });
            switch (Number(error)) {
                case 1:
                    $("#spinner").css("display", "block")
                    $("#messageArea").empty();
                    $("#messageArea").html("<div class='alert alert-info'><strong>아이디 또는 비밀번호가 입력되지 않았습니다.</strong></div>");
                    setTimeout(function () {
                        $("#spinner").css("display", "none");
                    }, 50);
                    $("#messageArea").fadeOut(10).fadeIn(10);
                    break;
                case 2:
                    $("#spinner").css("display", "block")
                    $("#messageArea").empty();
                    $("#messageArea").html("<div class='alert alert-info'><strong>존재하지 않는 아이디 입니다</strong></div>");
                    setTimeout(function () {
                        $("#spinner").css("display", "none");
                    }, 50);
                    $("#messageArea").fadeOut(10).fadeIn(10);
                    break;
                case 3:
                    console.log("gkadsgas")
                    $("#spinner").css("display", "block")
                    $("#messageArea").empty();
                    $("#messageArea").html("<div class='alert alert-info'><strong>비밀번호가 일치하지 않습니다.<br />(로그인 시도 횟수: " + loginTryCount + "/5)</strong></div>");
                    setTimeout(function () {
                        $("#spinner").css("display", "none");
                    }, 50);
                    $("#messageArea").fadeOut(10).fadeIn(10);
                    break;
                case 4:
                    $("#spinner").css("display", "block")
                    $("#messageArea").empty();
                    $("#messageArea").html("<div class='alert alert-info'><strong>로그인 잠김. 비밀번호 찾기를 통해 임시 비밀번호를 발급받아 로그인해주세요.</strong></div>");
                    setTimeout(function () {
                        $("#spinner").css("display", "none");
                    }, 50);
                    $("#messageArea").fadeOut(10).fadeIn(10);
                    break;
                default:
                    $("#spinner").css("display", "block")
                    $("#messageArea").empty();
                    $("#messageArea").html("");
                    setTimeout(function () {
                        $("#spinner").css("display", "none");
                    }, 50);
                    $("#messageArea").fadeOut(10).fadeIn(10);
                    break;
            }
        });

        function findIdAndPw() {
            window.open("/members/findIdAndPw", "아이디/비밀번호 찾기", "width=800, height=700");
        }
    </script>
</head>
<body>
<div id="spinner" class="position-absolute vw-100 vh-100" style="z-index:100; display:none">
    <div class="position-absolute top-50 start-50 translate-middle">
        <div class="spinner-border"></div>
    </div>
</div>
<div class="page-container">
    <div class="login-form-container shadow">
        <div class="login-form-right-side">
            <div class="top-logo-wrap">

            </div>
            <h1>PSY THINKTANK</h1>
            <p>주식 투자는 PSY Thinktank와 함께</p>
        </div>
        <div class="login-form-left-side">
            <div class="login-top-wrap">
                <span>계정이 없으신가요?</span>
                <button class="create-account-btn shadow-light" onclick="location.href='/members/add'">계정 생성</button>
            </div>
            <form action="/login_proc" method="post">
                <div class="login-input-container">
                    <div id="messageArea"></div>
                    <div class="login-input-wrap input-id">
                        <i class="far fa-id-card"></i>
                        <input id="memberId" name="memberId" placeholder="ID" type="text" maxlength="50">
                    </div>
                    <div class="login-input-wrap input-password">
                        <i class="fas fa-key"></i>
                        <input id="memberPw" name="memberPw" placeholder="Password" type="password" maxlength="50">
                    </div>
                </div>
                <div class="login-btn-wrap">
                    <button type="submit" id="loginBtn" class="login-btn">Login</button>
                    <a href="#" onclick="findIdAndPw()">아이디 혹은 비밀번호를 잊어버리셨나요?</a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>